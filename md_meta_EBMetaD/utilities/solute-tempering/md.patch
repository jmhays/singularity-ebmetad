*** md.c	2011-12-15 10:56:00.000000000 +0100
--- /Users/carlo/Downloads/gromacs-4.5.5/src/kernel/md.c	2011-09-21 14:34:32.000000000 +0200
***************
*** 84,91 ****
  #include "compute_io.h"
  #include "mvdata.h"
  #include "checkpoint.h"
- #include "solute.h"
- 
  #include "mtop_util.h"
  #include "sighandler.h"
  #include "string2.h"
--- 84,89 ----
***************
*** 318,329 ****
                      "\nWARNING: This run will generate roughly %.0f Mb of data\n\n",
                      io);
      }
- // I put it here becouse I need to modify the topology before the local setup
-     if(repl_ex_nst>0&&rex.t0>0.) {
-       if(MASTER(cr)) init_re_solute_temp(fr, top_global, ir->opts.ref_t[0], fplog);
-       rex.rest=1;
-     }
- // Carlo
  
      if (DOMAINDECOMP(cr)) {
          top = dd_init_local_top(top_global);
--- 316,321 ----
***************
*** 1757,1767 ****
          if ((repl_ex_nst > 0) && (step > 0) && !bLastStep &&
              do_per_step(step,repl_ex_nst)) 
          {
-             real VpmePP=0.;
-             if(rex.rest&&MASTER(cr)) 
-               ener_rest(cr, enerd, replica_exchange_get_repl(repl_ex), 
-                         replica_exchange_get_nrepl(repl_ex), VpmePP);
- 
              bExchanged = replica_exchange(fplog,cr,repl_ex,
                                            state_global,enerd->term,
                                            state,step,t);
--- 1749,1754 ----
